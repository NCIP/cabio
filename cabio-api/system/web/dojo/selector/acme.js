/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/

//>>built
define("dojo/selector/acme",["../dom","../sniff","../_base/array","../_base/lang","../_base/window"],function(_1,_2,_3,_4,_5){var _6=_4.trim;var _7=_3.forEach;var _8=function(){return _5.doc;};var _9=((_2("webkit")||_2("mozilla"))&&((_8().compatMode)=="BackCompat"));var _a=">~+";var _b=false;var _c=function(){return true;};var _d=function(_e){if(_a.indexOf(_e.slice(-1))>=0){_e+=" * ";}else{_e+=" ";}var ts=function(s,e){return _6(_e.slice(s,e));};var _f=[];var _10=-1,_11=-1,_12=-1,_13=-1,_14=-1,_15=-1,_16=-1,lc="",cc="",_17;var x=0,ql=_e.length,_18=null,_19=null;var _1a=function(){if(_16>=0){var tv=(_16==x)?null:ts(_16,x);_18[(_a.indexOf(tv)<0)?"tag":"oper"]=tv;_16=-1;}};var _1b=function(){if(_15>=0){_18.id=ts(_15,x).replace(/\\/g,"");_15=-1;}};var _1c=function(){if(_14>=0){_18.classes.push(ts(_14+1,x).replace(/\\/g,""));_14=-1;}};var _1d=function(){_1b();_1a();_1c();};var _1e=function(){_1d();if(_13>=0){_18.pseudos.push({name:ts(_13+1,x)});}_18.loops=(_18.pseudos.length||_18.attrs.length||_18.classes.length);_18.oquery=_18.query=ts(_17,x);_18.otag=_18.tag=(_18["oper"])?null:(_18.tag||"*");if(_18.tag){_18.tag=_18.tag.toUpperCase();}if(_f.length&&(_f[_f.length-1].oper)){_18.infixOper=_f.pop();_18.query=_18.infixOper.query+" "+_18.query;}_f.push(_18);_18=null;};for(;lc=cc,cc=_e.charAt(x),x<ql;x++){if(lc=="\\"){continue;}if(!_18){_17=x;_18={query:null,pseudos:[],attrs:[],classes:[],tag:null,oper:null,id:null,getTag:function(){return (_b)?this.otag:this.tag;}};_16=x;}if(_10>=0){if(cc=="]"){if(!_19.attr){_19.attr=ts(_10+1,x);}else{_19.matchFor=ts((_12||_10+1),x);}var cmf=_19.matchFor;if(cmf){if((cmf.charAt(0)=="\"")||(cmf.charAt(0)=="'")){_19.matchFor=cmf.slice(1,-1);}}_18.attrs.push(_19);_19=null;_10=_12=-1;}else{if(cc=="="){var _1f=("|~^$*".indexOf(lc)>=0)?lc:"";_19.type=_1f+cc;_19.attr=ts(_10+1,x-_1f.length);_12=x+1;}}}else{if(_11>=0){if(cc==")"){if(_13>=0){_19.value=ts(_11+1,x);}_13=_11=-1;}}else{if(cc=="#"){_1d();_15=x+1;}else{if(cc=="."){_1d();_14=x;}else{if(cc==":"){_1d();_13=x;}else{if(cc=="["){_1d();_10=x;_19={};}else{if(cc=="("){if(_13>=0){_19={name:ts(_13+1,x),value:null};_18.pseudos.push(_19);}_11=x;}else{if((cc==" ")&&(lc!=cc)){_1e();}}}}}}}}}return _f;};var _20=function(_21,_22){if(!_21){return _22;}if(!_22){return _21;}return function(){return _21.apply(window,arguments)&&_22.apply(window,arguments);};};var _23=function(i,arr){var r=arr||[];if(i){r.push(i);}return r;};var _24=function(n){return (1==n.nodeType);};var _25="";var _26=function(_27,_28){if(!_27){return _25;}if(_28=="class"){return _27.className||_25;}if(_28=="for"){return _27.htmlFor||_25;}if(_28=="style"){return _27.style.cssText||_25;}return (_b?_27.getAttribute(_28):_27.getAttribute(_28,2))||_25;};var _29={"*=":function(_2a,_2b){return function(_2c){return (_26(_2c,_2a).indexOf(_2b)>=0);};},"^=":function(_2d,_2e){return function(_2f){return (_26(_2f,_2d).indexOf(_2e)==0);};},"$=":function(_30,_31){return function(_32){var ea=" "+_26(_32,_30);var _33=ea.lastIndexOf(_31);return _33>-1&&(_33==(ea.length-_31.length));};},"~=":function(_34,_35){var _36=" "+_35+" ";return function(_37){var ea=" "+_26(_37,_34)+" ";return (ea.indexOf(_36)>=0);};},"|=":function(_38,_39){var _3a=_39+"-";return function(_3b){var ea=_26(_3b,_38);return ((ea==_39)||(ea.indexOf(_3a)==0));};},"=":function(_3c,_3d){return function(_3e){return (_26(_3e,_3c)==_3d);};}};var _3f=(typeof _8().firstChild.nextElementSibling=="undefined");var _40=!_3f?"nextElementSibling":"nextSibling";var _41=!_3f?"previousElementSibling":"previousSibling";var _42=(_3f?_24:_c);var _43=function(_44){while(_44=_44[_41]){if(_42(_44)){return false;}}return true;};var _45=function(_46){while(_46=_46[_40]){if(_42(_46)){return false;}}return true;};var _47=function(_48){var _49=_48.parentNode;var i=0,_4a=_49.children||_49.childNodes,ci=(_48["_i"]||-1),cl=(_49["_l"]||-1);if(!_4a){return -1;}var l=_4a.length;if(cl==l&&ci>=0&&cl>=0){return ci;}_49["_l"]=l;ci=-1;for(var te=_49["firstElementChild"]||_49["firstChild"];te;te=te[_40]){if(_42(te)){te["_i"]=++i;if(_48===te){ci=i;}}}return ci;};var _4b=function(_4c){return !((_47(_4c))%2);};var _4d=function(_4e){return ((_47(_4e))%2);};var _4f={"checked":function(_50,_51){return function(_52){return !!("checked" in _52?_52.checked:_52.selected);};},"first-child":function(){return _43;},"last-child":function(){return _45;},"only-child":function(_53,_54){return function(_55){return _43(_55)&&_45(_55);};},"empty":function(_56,_57){return function(_58){var cn=_58.childNodes;var cnl=_58.childNodes.length;for(var x=cnl-1;x>=0;x--){var nt=cn[x].nodeType;if((nt===1)||(nt==3)){return false;}}return true;};},"contains":function(_59,_5a){var cz=_5a.charAt(0);if(cz=="\""||cz=="'"){_5a=_5a.slice(1,-1);}return function(_5b){return (_5b.innerHTML.indexOf(_5a)>=0);};},"not":function(_5c,_5d){var p=_d(_5d)[0];var _5e={el:1};if(p.tag!="*"){_5e.tag=1;}if(!p.classes.length){_5e.classes=1;}var ntf=_5f(p,_5e);return function(_60){return (!ntf(_60));};},"nth-child":function(_61,_62){var pi=parseInt;if(_62=="odd"){return _4d;}else{if(_62=="even"){return _4b;}}if(_62.indexOf("n")!=-1){var _63=_62.split("n",2);var _64=_63[0]?((_63[0]=="-")?-1:pi(_63[0])):1;var idx=_63[1]?pi(_63[1]):0;var lb=0,ub=-1;if(_64>0){if(idx<0){idx=(idx%_64)&&(_64+(idx%_64));}else{if(idx>0){if(idx>=_64){lb=idx-idx%_64;}idx=idx%_64;}}}else{if(_64<0){_64*=-1;if(idx>0){ub=idx;idx=idx%_64;}}}if(_64>0){return function(_65){var i=_47(_65);return (i>=lb)&&(ub<0||i<=ub)&&((i%_64)==idx);};}else{_62=idx;}}var _66=pi(_62);return function(_67){return (_47(_67)==_66);};}};var _68=(_2("ie")&&(_2("ie")<9||_2("quirks")))?function(_69){var clc=_69.toLowerCase();if(clc=="class"){_69="className";}return function(_6a){return (_b?_6a.getAttribute(_69):_6a[_69]||_6a[clc]);};}:function(_6b){return function(_6c){return (_6c&&_6c.getAttribute&&_6c.hasAttribute(_6b));};};var _5f=function(_6d,_6e){if(!_6d){return _c;}_6e=_6e||{};var ff=null;if(!("el" in _6e)){ff=_20(ff,_24);}if(!("tag" in _6e)){if(_6d.tag!="*"){ff=_20(ff,function(_6f){return (_6f&&(_6f.tagName==_6d.getTag()));});}}if(!("classes" in _6e)){_7(_6d.classes,function(_70,idx,arr){var re=new RegExp("(?:^|\\s)"+_70+"(?:\\s|$)");ff=_20(ff,function(_71){return re.test(_71.className);});ff.count=idx;});}if(!("pseudos" in _6e)){_7(_6d.pseudos,function(_72){var pn=_72.name;if(_4f[pn]){ff=_20(ff,_4f[pn](pn,_72.value));}});}if(!("attrs" in _6e)){_7(_6d.attrs,function(_73){var _74;var a=_73.attr;if(_73.type&&_29[_73.type]){_74=_29[_73.type](a,_73.matchFor);}else{if(a.length){_74=_68(a);}}if(_74){ff=_20(ff,_74);}});}if(!("id" in _6e)){if(_6d.id){ff=_20(ff,function(_75){return (!!_75&&(_75.id==_6d.id));});}}if(!ff){if(!("default" in _6e)){ff=_c;}}return ff;};var _76=function(_77){return function(_78,ret,bag){while(_78=_78[_40]){if(_3f&&(!_24(_78))){continue;}if((!bag||_79(_78,bag))&&_77(_78)){ret.push(_78);}break;}return ret;};};var _7a=function(_7b){return function(_7c,ret,bag){var te=_7c[_40];while(te){if(_42(te)){if(bag&&!_79(te,bag)){break;}if(_7b(te)){ret.push(te);}}te=te[_40];}return ret;};};var _7d=function(_7e){_7e=_7e||_c;return function(_7f,ret,bag){var te,x=0,_80=_7f.children||_7f.childNodes;while(te=_80[x++]){if(_42(te)&&(!bag||_79(te,bag))&&(_7e(te,x))){ret.push(te);}}return ret;};};var _81=function(_82,_83){var pn=_82.parentNode;while(pn){if(pn==_83){break;}pn=pn.parentNode;}return !!pn;};var _84={};var _85=function(_86){var _87=_84[_86.query];if(_87){return _87;}var io=_86.infixOper;var _88=(io?io.oper:"");var _89=_5f(_86,{el:1});var qt=_86.tag;var _8a=("*"==qt);var ecs=_8()["getElementsByClassName"];if(!_88){if(_86.id){_89=(!_86.loops&&_8a)?_c:_5f(_86,{el:1,id:1});_87=function(_8b,arr){var te=_1.byId(_86.id,(_8b.ownerDocument||_8b));if(!te||!_89(te)){return;}if(9==_8b.nodeType){return _23(te,arr);}else{if(_81(te,_8b)){return _23(te,arr);}}};}else{if(ecs&&/\{\s*\[native code\]\s*\}/.test(String(ecs))&&_86.classes.length&&!_9){_89=_5f(_86,{el:1,classes:1,id:1});var _8c=_86.classes.join(" ");_87=function(_8d,arr,bag){var ret=_23(0,arr),te,x=0;var _8e=_8d.getElementsByClassName(_8c);while((te=_8e[x++])){if(_89(te,_8d)&&_79(te,bag)){ret.push(te);}}return ret;};}else{if(!_8a&&!_86.loops){_87=function(_8f,arr,bag){var ret=_23(0,arr),te,x=0;var _90=_8f.getElementsByTagName(_86.getTag());while((te=_90[x++])){if(_79(te,bag)){ret.push(te);}}return ret;};}else{_89=_5f(_86,{el:1,tag:1,id:1});_87=function(_91,arr,bag){var ret=_23(0,arr),te,x=0;var _92=_91.getElementsByTagName(_86.getTag());while((te=_92[x++])){if(_89(te,_91)&&_79(te,bag)){ret.push(te);}}return ret;};}}}}else{var _93={el:1};if(_8a){_93.tag=1;}_89=_5f(_86,_93);if("+"==_88){_87=_76(_89);}else{if("~"==_88){_87=_7a(_89);}else{if(">"==_88){_87=_7d(_89);}}}}return _84[_86.query]=_87;};var _94=function(_95,_96){var _97=_23(_95),qp,x,te,qpl=_96.length,bag,ret;for(var i=0;i<qpl;i++){ret=[];qp=_96[i];x=_97.length-1;if(x>0){bag={};ret.nozip=true;}var gef=_85(qp);for(var j=0;(te=_97[j]);j++){gef(te,ret,bag);}if(!ret.length){break;}_97=ret;}return ret;};var _98={},_99={};var _9a=function(_9b){var _9c=_d(_6(_9b));if(_9c.length==1){var tef=_85(_9c[0]);return function(_9d){var r=tef(_9d,[]);if(r){r.nozip=true;}return r;};}return function(_9e){return _94(_9e,_9c);};};var nua=navigator.userAgent;var wk="WebKit/";var _9f=(_2("webkit")&&(nua.indexOf(wk)>0)&&(parseFloat(nua.split(wk)[1])>528));var _a0=_2("ie")?"commentStrip":"nozip";var qsa="querySelectorAll";var _a1=(!!_8()[qsa]&&(!_2("safari")||(_2("safari")>3.1)||_9f));var _a2=/n\+\d|([^ ])?([>~+])([^ =])?/g;var _a3=function(_a4,pre,ch,_a5){return ch?(pre?pre+" ":"")+ch+(_a5?" "+_a5:""):_a4;};var _a6=function(_a7,_a8){_a7=_a7.replace(_a2,_a3);if(_a1){var _a9=_99[_a7];if(_a9&&!_a8){return _a9;}}var _aa=_98[_a7];if(_aa){return _aa;}var qcz=_a7.charAt(0);var _ab=(-1==_a7.indexOf(" "));if((_a7.indexOf("#")>=0)&&(_ab)){_a8=true;}var _ac=(_a1&&(!_a8)&&(_a.indexOf(qcz)==-1)&&(!_2("ie")||(_a7.indexOf(":")==-1))&&(!(_9&&(_a7.indexOf(".")>=0)))&&(_a7.indexOf(":contains")==-1)&&(_a7.indexOf(":checked")==-1)&&(_a7.indexOf("|=")==-1));if(_ac){var tq=(_a.indexOf(_a7.charAt(_a7.length-1))>=0)?(_a7+" *"):_a7;return _99[_a7]=function(_ad){try{if(!((9==_ad.nodeType)||_ab)){throw "";}var r=_ad[qsa](tq);r[_a0]=true;return r;}catch(e){return _a6(_a7,true)(_ad);}};}else{var _ae=_a7.split(/\s*,\s*/);return _98[_a7]=((_ae.length<2)?_9a(_a7):function(_af){var _b0=0,ret=[],tp;while((tp=_ae[_b0++])){ret=ret.concat(_9a(tp)(_af));}return ret;});}};var _b1=0;var _b2=_2("ie")?function(_b3){if(_b){return (_b3.getAttribute("_uid")||_b3.setAttribute("_uid",++_b1)||_b1);}else{return _b3.uniqueID;}}:function(_b4){return (_b4._uid||(_b4._uid=++_b1));};var _79=function(_b5,bag){if(!bag){return 1;}var id=_b2(_b5);if(!bag[id]){return bag[id]=1;}return 0;};var _b6="_zipIdx";var _b7=function(arr){if(arr&&arr.nozip){return arr;}var ret=[];if(!arr||!arr.length){return ret;}if(arr[0]){ret.push(arr[0]);}if(arr.length<2){return ret;}_b1++;var x,te;if(_2("ie")&&_b){var _b8=_b1+"";arr[0].setAttribute(_b6,_b8);for(x=1;te=arr[x];x++){if(arr[x].getAttribute(_b6)!=_b8){ret.push(te);}te.setAttribute(_b6,_b8);}}else{if(_2("ie")&&arr.commentStrip){try{for(x=1;te=arr[x];x++){if(_24(te)){ret.push(te);}}}catch(e){}}else{if(arr[0]){arr[0][_b6]=_b1;}for(x=1;te=arr[x];x++){if(arr[x][_b6]!=_b1){ret.push(te);}te[_b6]=_b1;}}}return ret;};var _b9=function(_ba,_bb){_bb=_bb||_8();var od=_bb.ownerDocument||_bb.documentElement;_b=(_bb.contentType&&_bb.contentType=="application/xml")||(_2("opera")&&(_bb.doctype||od.toString()=="[object XMLDocument]"))||(!!od)&&(_2("ie")?od.xml:(_bb.xmlVersion||od.xmlVersion));var r=_a6(_ba)(_bb);if(r&&r.nozip){return r;}return _b7(r);};_b9.filter=function(_bc,_bd,_be){var _bf=[],_c0=_d(_bd),_c1=(_c0.length==1&&!/[^\w#\.]/.test(_bd))?_5f(_c0[0]):function(_c2){return _3.indexOf(_b9(_bd,_1.byId(_be)),_c2)!=-1;};for(var x=0,te;te=_bc[x];x++){if(_c1(te)){_bf.push(te);}}return _bf;};return _b9;});