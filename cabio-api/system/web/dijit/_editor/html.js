//>>built
define("dijit/_editor/html",["dojo/_base/lang","dojo/sniff"],function(_1,_2){var _3=_1.getObject("dijit._editor",true);var _4=_3.escapeXml=function(_5,_6){_5=_5.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;");if(!_6){_5=_5.replace(/'/gm,"&#39;");}return _5;};_3.getNodeHtml=function(_7){var _8=[];_3.getNodeHtmlHelper(_7,_8);return _8.join("");};_3.getNodeHtmlHelper=function(_9,_a){switch(_9.nodeType){case 1:var _b=_9.nodeName.toLowerCase();if(!_b||_b.charAt(0)=="/"){return "";}_a.push("<",_b);var _c=[];var _d;if(_2("ie")){var _e=/^input$|^img$/i.test(_9.nodeName)?_9:_9.cloneNode(false);var s=_e.outerHTML;s=s.substr(0,s.indexOf(">")).replace(/(['"])[^"']*\1/g,"");var _f=/(\b\w+)\s?=/g;var m,key;while((m=_f.exec(s))){key=m[1];if(key.substr(0,3)!="_dj"){if(key=="src"||key=="href"){if(_9.getAttribute("_djrealurl")){_c.push([key,_9.getAttribute("_djrealurl")]);continue;}}var val,_10;switch(key){case "style":val=_9.style.cssText.toLowerCase();break;case "class":val=_9.className;break;case "width":if(_b==="img"){_10=/width=(\S+)/i.exec(s);if(_10){val=_10[1];}break;}case "height":if(_b==="img"){_10=/height=(\S+)/i.exec(s);if(_10){val=_10[1];}break;}default:val=_9.getAttribute(key);}if(val!=null){_c.push([key,val.toString()]);}}}}else{var i=0;while((_d=_9.attributes[i++])){var n=_d.name;if(n.substr(0,3)!="_dj"){var v=_d.value;if(n=="src"||n=="href"){if(_9.getAttribute("_djrealurl")){v=_9.getAttribute("_djrealurl");}}_c.push([n,v]);}}}_c.sort(function(a,b){return a[0]<b[0]?-1:(a[0]==b[0]?0:1);});var j=0;while((_d=_c[j++])){_a.push(" ",_d[0],"=\"",(_1.isString(_d[1])?_4(_d[1],true):_d[1]),"\"");}switch(_b){case "br":case "hr":case "img":case "input":case "base":case "meta":case "area":case "basefont":_a.push(" />");break;case "script":_a.push(">",_9.innerHTML,"</",_b,">");break;default:_a.push(">");if(_9.hasChildNodes()){_3.getChildrenHtmlHelper(_9,_a);}_a.push("</",_b,">");}break;case 4:case 3:_a.push(_4(_9.nodeValue,true));break;case 8:_a.push("<!--",_4(_9.nodeValue,true),"-->");break;default:_a.push("<!-- Element not recognized - Type: ",_9.nodeType," Name: ",_9.nodeName,"-->");}};_3.getChildrenHtml=function(_11){var _12=[];_3.getChildrenHtmlHelper(_11,_12);return _12.join("");};_3.getChildrenHtmlHelper=function(dom,_13){if(!dom){return;}var _14=dom["childNodes"]||dom;var _15=!_2("ie")||_14!==dom;var _16,i=0;while((_16=_14[i++])){if(!_15||_16.parentNode==dom){_3.getNodeHtmlHelper(_16,_13);}}};return _3;});